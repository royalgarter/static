"use strict";(self.webpackChunktagspaces=self.webpackChunktagspaces||[]).push([[6746],{59975:(e,t,r)=>{r.d(t,{Z:()=>i});var a,l=r(67294);function n(e){return l.createElement("svg",{style:{width:"60%",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",height:150},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:"32",height:"32",fill:"none",stroke:"#bbbbbb22",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"},e.isFile?l.createElement("path",{d:"M6 2 L6 30 26 30 26 10 18 2 Z M18 2 L18 10 26 10"}):l.createElement("path",{d:"M2 26 L30 26 30 7 14 7 10 4 2 4 Z M30 12 L2 12"}))}e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const o=n,i=o;var c,s;(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(n,"EntryIcon","/Users/na/TagSpaces/tsbuilder/mainrepo/app/components/EntryIcon.tsx"),c.register(o,"default","/Users/na/TagSpaces/tsbuilder/mainrepo/app/components/EntryIcon.tsx")),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)},18439:(e,t,r)=>{r.d(t,{Z:()=>m});var a,l=r(67294),n=r(96436),o=r(46408),i=r(49764);e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const c={beginDrag(e){const t=e.children.props.entryPath,r=e.children.props.selectedEntries;return r.some((e=>e.path===t))?{path:t,selectedEntries:r}:{path:t,selectedEntries:[{path:t}]}}},s=e=>(e.connectDragPreview((0,o.r)(),{captureDraggingState:!0}),e.connectDragSource(l.createElement("span",null,e.children))),d=(e,t)=>({connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}),p=(0,n.E)(i.Z.FILE,c,d)(s),m=p;var u,g;(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(c,"boxSource","/Users/na/TagSpaces/tsbuilder/mainrepo/app/components/FileSourceDnd.tsx"),u.register(s,"FileSourceDnd","/Users/na/TagSpaces/tsbuilder/mainrepo/app/components/FileSourceDnd.tsx"),u.register(d,"collect","/Users/na/TagSpaces/tsbuilder/mainrepo/app/components/FileSourceDnd.tsx"),u.register(p,"default","/Users/na/TagSpaces/tsbuilder/mainrepo/app/components/FileSourceDnd.tsx")),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&g(e)},54767:(e,t,r)=>{r.d(t,{Z:()=>D});var a,l=r(67294),n=r(21822),o=r(72962),i=r(24498),c=r(77745),s=r(17888),d=r(58653),p=r(18508),m=r(12501),u=r(76866),g=r(74825),h=r(50130),Z=r(50594),E=r(24011),y=r(7419),f=r(74008),b=r(56760),v=r(61225),S=r(5693);function C(e){const[t,r]=(0,l.useState)(void 0),a=()=>{const{defaultBackgroundColor:r,defaultTextColor:a,selectedTag:l}=e;l.textcolor||(l.textcolor=a),l.color||(l.color=r),e.addTag(l,t),e.onClose()},{open:E,onClose:f}=e,C=(0,b.Z)(),T=(0,v.Z)(C.breakpoints.down("md"));return l.createElement(d.Z,{open:E,onClose:f,fullScreen:T,keepMounted:!0,scroll:"paper",onKeyDown:e=>{"Enter"!==e.key&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation(),a())}},l.createElement(c.Z,null,y.Z.t("core:addTagToTagGroup")+": "+e.selectedTag.title,l.createElement(h.Z,{"aria-label":"close",style:{position:"absolute",right:5,top:5},onClick:f,size:"large"},l.createElement(Z.Z,null))),l.createElement(i.Z,{style:{minWidth:400}},l.createElement(s.Z,{fullWidth:!0},l.createElement(p.Z,{htmlFor:"addTagToTagGroupInput"},y.Z.t("core:chooseTagGroup")),l.createElement(m.Z,{value:t,onChange:e=>{r(e.target.value)},input:l.createElement(u.Z,{id:"addTagToTagGroupInput"})},(0,S.sA)().map((e=>l.createElement(g.Z,{value:e.uuid},e.title)))))),l.createElement(o.Z,null,l.createElement(n.Z,{onClick:f},y.Z.t("core:cancel")),l.createElement(n.Z,{disabled:void 0===t,onClick:a,"data-tid":"createTagsConfirmButton",color:"primary"},y.Z.t("core:ok"))))}e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(C,"useState{[tagGroup, setTagGroup](undefined)}\nuseTheme{theme}\nuseMediaQuery{fullScreen}",(()=>[b.Z,v.Z]));const T=e=>({defaultBackgroundColor:(0,f.vm)(e),defaultTextColor:(0,f.x$)(e)}),k=(0,E.$j)(T)(C),D=k;var L,P;(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(L.register(C,"AddTagToTagGroupDialog","/Users/na/TagSpaces/tsbuilder/mainrepo/app/components/dialogs/AddTagToTagGroupDialog.tsx"),L.register(T,"mapStateToProps","/Users/na/TagSpaces/tsbuilder/mainrepo/app/components/dialogs/AddTagToTagGroupDialog.tsx"),L.register(k,"default","/Users/na/TagSpaces/tsbuilder/mainrepo/app/components/dialogs/AddTagToTagGroupDialog.tsx")),(P="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&P(e)},11157:(e,t,r)=>{r.d(t,{Z:()=>N});var a=r(67294),l=r(29894),n=r(61702),o=r(12551),i=r(74825),c=r(44373),s=r(75414),d=r(7431),p=r(51017),m=r(25512),u=r(17696),g=r(56868),h=r(96031),Z=r(51797),E=r(11898),y=r(56693),f=r(43800),b=r(85372),v=r(8364),S=r(5934),C=r(3530),T=r(57866),k=r(7419),D=r(36808),L=r(65725),P=r(94315),x=r(14890),w=r(44187),F=r(24011),M=r(23132),G=r(74008);e=r.hmd(e);var H,I=r(25108);function R(e){const{selectedEntries:t,isReadOnlyMode:r,currentLocation:x,onClose:w,selectedFilePath:F,showNotification:G,locations:H}=e,R=[],O=F.toLowerCase(),B=M.RU.some((e=>O.endsWith("."+e)));return t.length<2&&(R.push(a.createElement(i.Z,{key:"fileMenuOpenFile","data-tid":"fileMenuOpenFile",onClick:function(){w(),F&&(0,L.$W)(F).then((t=>(e.openFsEntry(t),!0))).catch((t=>I.warn("Error getting properties for entry: "+e.selectedFilePath+" - "+t)))}},a.createElement(l.Z,null,a.createElement(s.Z,null)),a.createElement(n.Z,{primary:k.Z.t("core:openFile")}))),R.push(a.createElement(i.Z,{key:"fileMenuOpenParentFolderInternally","data-tid":"fileMenuOpenParentFolderInternally",onClick:function(){if(w(),F){const t=(0,T.extractParentDirectoryPath)(F,D.Z.getDirSeparator());e.exitSearchMode(),e.loadDirectoryContent(t,!1,!0)}}},a.createElement(l.Z,null,a.createElement(p.Ri,null)),a.createElement(n.Z,{primary:k.Z.t("core:openParentFolder")})))),!(D.Z.haveObjectStoreSupport()||D.Z.haveWebDavSupport()||C.Z.isWeb)&&t.length<2&&(R.push(a.createElement(i.Z,{key:"fileMenuOpenFileNatively","data-tid":"fileMenuOpenFileNatively",onClick:function(){w(),e.selectedFilePath&&e.openFileNatively(e.selectedFilePath)}},a.createElement(l.Z,null,a.createElement(d.Z,null)),a.createElement(n.Z,{primary:k.Z.t("core:openFileNatively")}))),R.push(a.createElement(i.Z,{key:"fileMenuOpenContainingFolder","data-tid":"fileMenuOpenContainingFolder",onClick:function(){w(),e.selectedFilePath&&e.showInFileManager(e.selectedFilePath)}},a.createElement(l.Z,null,a.createElement(m.Z,null)),a.createElement(n.Z,{primary:k.Z.t("core:showInFileManager")}))),R.push(a.createElement(c.Z,{key:"fmDivider"}))),r||(R.push(a.createElement(i.Z,{key:"fileMenuAddRemoveTags","data-tid":"fileMenuAddRemoveTags",onClick:function(){w(),e.openAddRemoveTagsDialog()}},a.createElement(l.Z,null,a.createElement(u.Z,null)),a.createElement(n.Z,{primary:k.Z.t("core:addRemoveTags")}))),e.reorderTop&&R.push(a.createElement(i.Z,{key:"reorderTop","data-tid":"reorderTopTID",onClick:()=>{w(),e.reorderTop()}},a.createElement(l.Z,null,a.createElement(h.Z,null)),a.createElement(n.Z,{primary:k.Z.t("core:moveToTop")}))),e.reorderBottom&&R.push(a.createElement(i.Z,{key:"reorderBottom","data-tid":"reorderBottomTID",onClick:()=>{w(),e.reorderBottom()}},a.createElement(l.Z,null,a.createElement(Z.Z,null)),a.createElement(n.Z,{primary:k.Z.t("core:moveToBottom")}))),R.push(a.createElement(i.Z,{key:"fileMenuRenameFile","data-tid":"fileMenuRenameFile",onClick:function(){w(),e.openRenameFileDialog()}},a.createElement(l.Z,null,a.createElement(b.Z,null)),a.createElement(n.Z,{primary:k.Z.t("core:renameFile")}))),R.push(a.createElement(i.Z,{key:"fileMenuDuplicateFile","data-tid":"fileMenuDuplicateFileTID",onClick:function(){if(w(),F){const t=(0,T.extractContainingDirectoryPath)(F,D.Z.getDirSeparator()),r=(0,T.extractFileName)(F,D.Z.getDirSeparator()),a=(0,T.extractTags)(F,C.Z.tagDelimiter,D.Z.getDirSeparator());a.push("copy"),a.push((0,S.formatDateTime4Tag)(new Date,!0));const l=(t?t+D.Z.getDirSeparator():"")+(0,L.Y_)(r,a,C.Z.tagDelimiter,e.prefixTagContainer);D.Z.copyFilePromise(F,l).then((()=>(e.loadDirectoryContent(t,!0,!0),!0))).catch((e=>{G("Error creating duplicate: "+e.message)}))}}},a.createElement(l.Z,null,a.createElement(E.Z,null)),a.createElement(n.Z,{primary:k.Z.t("core:duplicateFile")}))),R.push(a.createElement(i.Z,{key:"fileMenuMoveCopyFile","data-tid":"fileMenuMoveCopyFile",onClick:function(){w(),e.openMoveCopyFilesDialog()}},a.createElement(l.Z,null,a.createElement(g.Z,null)),a.createElement(n.Z,{primary:k.Z.t("core:moveCopyFile")}))),P.T&&t.length<2&&(R.push(a.createElement(i.Z,{key:"setAsThumbTID","data-tid":"setAsThumbTID",onClick:function(){w(),(0,L.KH)(e.selectedFilePath).then((e=>(G("Thumbnail created for: "+e),!0))).catch((t=>(G("Thumbnail creation failed."),I.warn("Error setting Thumb for entry: "+e.selectedFilePath,t),!0)))}},a.createElement(l.Z,null,a.createElement(y.Z,null)),a.createElement(n.Z,{primary:k.Z.t("core:setAsThumbnail")}))),B&&R.push(a.createElement(i.Z,{key:"setAsBgndTID","data-tid":"setAsBgndTID",onClick:function(){w();let t=D.Z.haveObjectStoreSupport()||D.Z.haveWebDavSupport()?D.Z.getURLforPath(e.selectedFilePath):e.selectedFilePath;const r=(0,T.extractContainingDirectoryPath)(e.selectedFilePath,D.Z.getDirSeparator());(0,L.xs)(t,r).then((r=>(e.setLastBackgroundImageChange(t,(new Date).getTime()),G("Background created for: "+r),!0))).catch((t=>(G("Background creation failed."),I.warn("Error setting Background for entry: "+e.selectedFilePath,t),!0)))}},a.createElement(l.Z,null,a.createElement(y.Z,null)),a.createElement(n.Z,{primary:k.Z.t("core:setAsBackground")})))),R.push(a.createElement(i.Z,{key:"fileMenuDeleteFile","data-tid":"fileMenuDeleteFile",onClick:function(){w(),e.openDeleteFileDialog()}},a.createElement(l.Z,null,a.createElement(v.Z,null)),a.createElement(n.Z,{primary:k.Z.t("core:deleteEntry")})))),1===t.length&&R.push(a.createElement(i.Z,{key:"copySharingLink","data-tid":"copyFileSharingLink",onClick:function(){if(w(),1===t.length){const e=t[0].locationID?t[0].locationID:x.uuid,r=t[0].path,a=H.find((t=>t.uuid===e)),l=(0,L.hV)(a,r),n=(0,T.generateSharingLink)(e,l);navigator.clipboard.writeText(n).then((()=>(G(k.Z.t("core:sharingLinkCopied")),!0))).catch((()=>{G(k.Z.t("core:sharingLinkFailed"))}))}}},a.createElement(l.Z,null,a.createElement(f.Z,null)),a.createElement(n.Z,{primary:k.Z.t("core:copySharingLink")}))),a.createElement("div",{style:{overflowY:"hidden"}},a.createElement(o.Z,{anchorEl:e.anchorEl,anchorReference:e.mouseY&&e.mouseX?"anchorPosition":void 0,anchorPosition:e.mouseY&&e.mouseX?{top:e.mouseY,left:e.mouseX}:void 0,open:e.open,onClose:e.onClose},R))}function O(e){return{prefixTagContainer:(0,G.mR)(e)}}function B(e){return(0,x.DE)({setLastBackgroundImageChange:w.Nw.setLastBackgroundImageChange,exitSearchMode:w.Nw.exitSearchMode},e)}(H="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&H(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const z=(0,F.$j)(O,B)(R),N=z;var U,A;(U="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(U.register(R,"FileMenu","/Users/na/TagSpaces/tsbuilder/mainrepo/app/components/menus/FileMenu.tsx"),U.register(O,"mapStateToProps","/Users/na/TagSpaces/tsbuilder/mainrepo/app/components/menus/FileMenu.tsx"),U.register(B,"mapDispatchToProps","/Users/na/TagSpaces/tsbuilder/mainrepo/app/components/menus/FileMenu.tsx"),U.register(z,"default","/Users/na/TagSpaces/tsbuilder/mainrepo/app/components/menus/FileMenu.tsx")),(A="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&A(e)},94968:(e,t,r)=>{r.d(t,{cw:()=>Z,eB:()=>g});var a=r(18439),l=r(81687),n=r(49764),o=r(67294),i=r(5934),c=r(36808),s=r(3530),d=r(7419),p=r(65914);e=r.hmd(e);var m,u=r(25108);(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&m(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const g=e=>{let t=!1;return!!(e&&e.length>0)&&(t=e.some((e=>void 0!==e&&!e.isFile)),!t)},h=e=>{let t=!1;return e&&e.length>0&&(t=e.some((e=>void 0!==e&&e.isFile))),!t},Z=(e,t,r,p,m,Z,E,y,f,b,v,S,C,T,k,D,L,P,x,w,F,M,G)=>{if(!e.isFile&&!Z)return;const H=(e,t)=>{e.preventDefault(),e.stopPropagation();const r=v.some((e=>e.uuid===t.uuid));t.isFile?(y?0!==v.length&&g(v)?e.ctrlKey?r||S([...v,t]):S(r?[...v.filter((e=>e.uuid!==t.uuid)),t]:[t]):S([t]):r||(v.length>0?S([...v,t]):S([t])),P(e.currentTarget)):(0!==v.length&&h(v)?S(r?[...v.filter((e=>e.uuid!==t.uuid)),t]:[t]):S([t]),x&&x(e.currentTarget))},I=e=>{e.isFile?(S([e]),k(e)):(u.log("Handle Grid cell db click, selected path : ",e.path),L(e.path,!0,!0))},R=(e,t)=>{S([]),b.type===i.locationType.TYPE_CLOUD?c.Z.enableObjectStoreSupport(b).then((()=>(I(t),!0))).catch((e=>{u.log("enableObjectStoreSupport",e)})):b.type===i.locationType.TYPE_WEBDAV?(c.Z.enableWebdavSupport(b),I(t)):b.type===i.locationType.TYPE_LOCAL&&(c.Z.disableObjectStoreSupport(),c.Z.disableWebdavSupport(),I(t))},O=(e,t)=>{const r=s.Z.isMacLike?e.metaKey:e.ctrlKey;if(e.shiftKey){let e;C&&(e=T.findIndex((e=>e.path===C)));const r=T.findIndex((e=>e.path===t.path));let a;e<0&&(e=r),r>e?a=T.slice(e,r+1):r<e?a=T.slice(r,e+1).reverse():r===e&&(a=[t]),S(a)}else if("drag"===e.type)if(v&&v.some((e=>e.path===t.path)));else{const e=T.find((e=>e.path===t.path));e&&S([e])}else r?v&&v.some((e=>e.path===t.path))?S(v.filter((e=>e.path!==t.path))):S([...v,t]):(S([t]),t.isFile&&("openInternal"===f?k(t):"openExternal"===f&&D(t.path)))},B=e.path;return e.isFile?o.createElement(a.Z,{key:B},r(e,v,t,H,O,R,G)):o.createElement("div",{style:{position:"relative"},key:B},o.createElement(l.Z,{accepts:[n.Z.FILE],path:e.path,onDrop:(e,t)=>{if(E)w(d.Z.t("core:dndDisabledReadOnlyMode"),"error",!0);else if(t){const r=t.getItem();let a;if(r.selectedEntries&&r.selectedEntries.length>0){const t=r.selectedEntries.map((e=>e.path)).filter((t=>t!==e.path));a=t.length>0?t:[r.path]}else a=[r.path];u.log("Dropped files: "+e.path),F(a,e.path),M()}}},r(e,v,t,H,O,R,G)))};var E,y;(E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(E.register(g,"fileOperationsEnabled","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/common/main-container.tsx"),E.register(h,"folderOperationsEnabled","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/common/main-container.tsx"),E.register(Z,"renderCell","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/common/main-container.tsx"),E.register((()=>o.createElement("div",{style:{position:"relative"}},o.createElement(p.Z,{entryPath:""},o.createElement("div",null)))),"renderCellPlaceholder","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/common/main-container.tsx")),(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&y(e)},94898:(e,t,r)=>{r.d(t,{Z:()=>G});var a,l=r(67294),n=r(94184),o=r.n(n),i=r(30030),c=r(91647),s=r(3896),d=r(58094),p=r(68188),m=r(17171),u=r(39628),g=r(14890),h=r(24011),Z=r(5934),E=r(57866),y=r(3530),f=r(65725),b=r(14412),v=r(6121),S=r(1075),C=r(7419),T=r(36808),k=r(59975),D=r(170),L=r(44187),P=r(51017);function x(e){const{selected:t,fsEntry:r,entrySize:a,classes:n,theme:g,supportedFileTypes:h,thumbnailMode:D,addTags:L,addTag:x,selectedEntries:w,isReadOnlyMode:F,handleTagMenu:M,layoutType:G,handleGridContextMenu:H,handleGridCellDblClick:I,handleGridCellClick:R,showTags:O,selectEntry:B,deselectEntry:z,isLast:N}=e,U=(({isNewFile:e,...t})=>t)(r),A=(0,E.extractTitle)(U.name,!U.isFile,T.Z.getDirSeparator());let W;e.showEntriesDescription&&(W=U.description,W&&W.length>100&&(W=(0,f.Yi)(W,100)),W&&"row"===G&&U.isFile&&(W=" | "+W));const j=(0,f.NW)(U,h),J=(0,f.eT)(U);let Y=[];U.isFile&&(Y=(0,E.extractTagsAsObjects)(U.name,y.Z.tagDelimiter,T.Z.getDirSeparator()));const K=U.tags?U.tags:[],$=K.map((e=>e.title)),Q=[...K,...Y.filter((e=>!$.includes(e.title)))];let X="";Q&&Q.map((e=>(X+=e.title+", ",!0))),X=X.substring(0,X.length-2);const _=l.createElement(S.Z,{tags:Q});function q(e){return e.indexOf("?")>0?"&":"?"}function V(t){let r=0;return t.map(((t,a)=>{const n=F?l.createElement(v.Z,{tag:t,key:U.path+t.title,entryPath:U.path,addTags:L,handleTagMenu:M,selectedEntries:w}):l.createElement(b.Z,{tag:t,index:"sidecar"===t.type?a:a-r,key:U.path+t.title,entryPath:U.path,addTags:L,addTag:x,handleTagMenu:M,selectedEntries:w,editTagForEntry:e.editTagForEntry,reorderTags:e.reorderTags});return"sidecar"===t.type&&(r=a+1),n}))}let ee=130;"small"===a?ee=35:"normal"===a?ee=70:"big"===a&&(ee=100);let te=l.Fragment;return"grid"===G?te=l.createElement("div",{style:{background:J,borderRadius:5}},l.createElement("div",{className:n.gridCellThumb,style:{position:"relative",height:150}},U.thumbPath?l.createElement("img",{alt:"thumbnail",className:n.gridCellThumb,src:U.thumbPath+(!e.lastThumbnailImageChange||e.lastThumbnailImageChange.thumbPath!==U.thumbPath||T.Z.haveObjectStoreSupport()||T.Z.haveWebDavSupport()?"":q(U.thumbPath)+e.lastThumbnailImageChange.dt),onError:e=>e.target.style.display="none",loading:"lazy",style:{objectFit:D,position:"absolute",width:"100%",height:150}}):l.createElement(k.Z,{isFile:U.isFile}),l.createElement("div",{id:"gridCellTags",className:n.gridCellTags},O&&Q?V(Q):_),W&&l.createElement(d.Z,{title:C.Z.t("core:entryDescription")},l.createElement(c.Z,{"data-tid":"gridCellDescription"+W.trim().replaceAll(/\s+/g,"-"),className:n.gridCellDescription,variant:"caption"},W))),l.createElement(c.Z,{className:n.gridCellTitle,"data-tid":"fsEntryName_"+U.name,variant:"body1"},A),l.createElement("div",{className:n.gridDetails},l.createElement(d.Z,{title:U.path},l.createElement(c.Z,{className:n.gridFileExtension,style:{backgroundColor:j,textShadow:"1px 1px #8f8f8f",textOverflow:"unset",maxWidth:U.isFile?50:100},noWrap:!0,variant:"button"},U.isFile?U.extension:l.createElement(p.Z,null))),U.isFile&&U.lmdt&&l.createElement(c.Z,{className:n.gridSizeDate,variant:"caption"},l.createElement(d.Z,{title:C.Z.t("core:modifiedDate")+": "+(0,Z.formatDateTime)(U.lmdt,!0)},l.createElement("span",null,(0,Z.formatDateTime)(U.lmdt,!1))),l.createElement(d.Z,{title:U.size+" "+C.Z.t("core:sizeInBytes")},l.createElement("span",null," | "+(0,Z.formatFileSize)(U.size)))))):"row"===G&&(te=function(t){const r="small"===a;let o=85;r?o=30:"normal"===a?o=70:"big"===a&&(o=100);const s=t?g.palette.primary.light:J,p=U.isFile&&(0,Z.formatFileSize)(U.size)+" | ",h=U.isFile&&U.lmdt&&(0,Z.formatDateTime)(U.lmdt,!0);return l.createElement(i.ZP,{container:!0,wrap:"nowrap",className:n.rowHover,style:{backgroundColor:s,borderRadius:5}},l.createElement(i.ZP,{item:!0,style:{minHeight:ee,width:r?80:60,padding:3,marginRight:5,textAlign:"left",display:"flex"}},l.createElement(d.Z,{title:U.path},l.createElement("div",{"data-tid":"rowCellTID",style:{display:"flex",flexDirection:r?"row":"column",flex:1,padding:4,borderWidth:1,color:"white",textTransform:"uppercase",fontSize:12,fontWeight:"bold",borderRadius:4,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",backgroundColor:j,alignItems:"center"},role:"presentation",onClick:e=>{e.stopPropagation(),t?z(U):B(U)}},t?l.createElement(m.Z,null):l.createElement(u.Z,null),U.isFile?l.createElement("span",{style:{width:"100%",marginTop:r?0:10,textShadow:"1px 1px #8f8f8f",overflowWrap:"anywhere"}},U.extension):l.createElement(P.RO,{style:{margin:"0 auto"}})))),r?l.createElement(i.ZP,{item:!0,xs:!0,zeroMinWidth:!0,style:{display:"flex"}},l.createElement(c.Z,{style:{wordBreak:"break-all",alignSelf:"center"}},A,"Â ",O&&Q?V(Q):_)):l.createElement(i.ZP,{item:!0,xs:!0,zeroMinWidth:!0},l.createElement(c.Z,{style:{wordBreak:"break-all"}},A),O&&Q?V(Q):_,l.createElement(c.Z,{style:{color:"gray"},variant:"body2"},l.createElement(d.Z,{title:U.size+" "+C.Z.t("core:sizeInBytes")},l.createElement("span",null,p)),l.createElement(d.Z,{title:C.Z.t("core:modifiedDate")+": "+(0,Z.formatDateTime)(U.lmdt,!0)},l.createElement("span",null,h)),l.createElement("span",null,W))),U.thumbPath&&l.createElement(i.ZP,{item:!0,style:{display:"flex",alignItems:"center"}},l.createElement("img",{alt:"thumbnail",className:n.gridCellThumb,src:U.thumbPath+(!e.lastThumbnailImageChange||e.lastThumbnailImageChange.thumbPath!==U.thumbPath||T.Z.haveObjectStoreSupport()||T.Z.haveWebDavSupport()?"":q(U.thumbPath)+e.lastThumbnailImageChange.dt),onError:e=>e.target.style.display="none",loading:"lazy",style:{objectFit:D,paddingRight:4,paddingTop:4,height:o,width:o}})))}(t)),l.createElement(s.Z,{elevation:2,"data-entry-id":U.uuid,className:o()("grid"===G&&n.gridCell,"row"===G&&n.rowCell,t&&"grid"===G&&n.selectedGridCell,t&&"row"===G&&n.selectedRowCell),style:{minHeight:"row"===G?ee:"auto",marginBottom:N?40:"auto",backgroundColor:g.palette.background.default},onContextMenu:e=>H(e,U),onDoubleClick:e=>{I(e,U)},onClick:e=>{e.stopPropagation(),y.Z.isCordovaiOS?I(e,U):R(e,U)},onDrag:e=>{R(e,U)}},te)}function w(e){return{reorderTags:e.settings.reorderTags,lastThumbnailImageChange:(0,L.lS)(e)}}function F(e){return(0,g.DE)({editTagForEntry:D.Z.editTagForEntry,exitSearchMode:L.Nw.exitSearchMode},e)}e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const M=(0,h.$j)(w,F)(x),G=M;var H,I;(H="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(H.register(100,"maxDescriptionPreviewLength","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/CellContent.tsx"),H.register(x,"CellContent","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/CellContent.tsx"),H.register(w,"mapStateToProps","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/CellContent.tsx"),H.register(F,"mapActionCreatorsToProps","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/CellContent.tsx"),H.register(M,"default","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/CellContent.tsx")),(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&I(e)},31300:(e,t,r)=>{r.d(t,{Z:()=>v});var a,l=r(67294),n=r(61702),o=r(29894),i=r(12551),c=r(74825),s=r(17171),d=r(39628),p=r(44373),m=r(35213),u=r(21775),g=r(8857),h=r(59462),Z=r(94229),E=r(9944),y=r(7419);function f(e){const{open:t,onClose:r,anchorEl:a,changeEntrySize:f,toggleShowDirectories:b,showDirectories:v,toggleShowTags:S,showTags:C,toggleThumbnailsMode:T,thumbnailMode:k,changeSingleClickAction:D,entrySize:L,singleClickAction:P,openHelpWebPage:x,openSettings:w}=e;return l.createElement(i.Z,{anchorEl:a,open:t,onClose:r},l.createElement(c.Z,{"data-tid":"gridPerspectiveToggleShowDirectories",title:y.Z.t("core:showHideDirectories"),"aria-label":y.Z.t("core:showHideDirectories"),onClick:b},l.createElement(o.Z,null,v?l.createElement(s.Z,null):l.createElement(d.Z,null)),l.createElement(n.Z,{primary:y.Z.t("core:showHideDirectories")})),l.createElement(c.Z,{"data-tid":"gridPerspectiveToggleShowTags",title:y.Z.t("core:showTags"),"aria-label":y.Z.t("core:showTags"),onClick:S},l.createElement(o.Z,null,C?l.createElement(s.Z,null):l.createElement(d.Z,null)),l.createElement(n.Z,{primary:y.Z.t("core:showTags")})),l.createElement(p.Z,null),l.createElement(c.Z,{"data-tid":"gridPerspectiveToggleThumbnailsMode",title:y.Z.t("core:toggleThumbnailModeTitle"),"aria-label":y.Z.t("core:toggleThumbnailMode"),onClick:T},l.createElement(o.Z,null,"cover"===k?l.createElement(m.Z,null):l.createElement(u.Z,null)),l.createElement(n.Z,{primary:y.Z.t("core:toggleThumbnailMode")})),l.createElement(p.Z,null),l.createElement(c.Z,{"data-tid":"gridPerspectiveEntrySizeSmall",title:y.Z.t("core:entrySizeSmall"),"aria-label":y.Z.t("core:entrySizeSmall"),onClick:()=>f("small")},l.createElement(o.Z,null,"small"===L?l.createElement(g.Z,null):l.createElement(h.Z,null)),l.createElement(n.Z,{primary:y.Z.t("core:entrySizeSmall")})),l.createElement(c.Z,{"data-tid":"gridPerspectiveEntrySizeNormal",title:y.Z.t("core:entrySizeNormal"),"aria-label":y.Z.t("core:entrySizeNormal"),onClick:()=>f("normal")},l.createElement(o.Z,null,"normal"===L?l.createElement(g.Z,null):l.createElement(h.Z,null)),l.createElement(n.Z,{primary:y.Z.t("core:entrySizeNormal")})),l.createElement(c.Z,{"data-tid":"gridPerspectiveEntrySizeBig",title:y.Z.t("core:entrySizeBig"),"aria-label":y.Z.t("core:entrySizeBig"),onClick:()=>f("big")},l.createElement(o.Z,null,"big"===L?l.createElement(g.Z,null):l.createElement(h.Z,null)),l.createElement(n.Z,{primary:y.Z.t("core:entrySizeBig")})),l.createElement(p.Z,null),l.createElement(c.Z,{"data-tid":"gridPerspectiveSingleClickOpenInternally",title:y.Z.t("core:singleClickOpenInternally"),"aria-label":y.Z.t("core:singleClickOpenInternally"),onClick:()=>D("openInternal")},l.createElement(o.Z,null,"openInternal"===P?l.createElement(g.Z,null):l.createElement(h.Z,null)),l.createElement(n.Z,{primary:y.Z.t("core:singleClickOpenInternally")})),l.createElement(c.Z,{"data-tid":"gridPerspectiveSingleClickOpenExternally",title:y.Z.t("core:singleClickOpenExternally"),"aria-label":y.Z.t("core:singleClickOpenExternally"),onClick:()=>D("openExternal")},l.createElement(o.Z,null,"openExternal"===P?l.createElement(g.Z,null):l.createElement(h.Z,null)),l.createElement(n.Z,{primary:y.Z.t("core:singleClickOpenExternally")})),l.createElement(c.Z,{"data-tid":"gridPerspectiveSingleClickSelects",title:y.Z.t("core:singleClickSelects"),"aria-label":y.Z.t("core:singleClickSelects"),onClick:()=>D("selects")},l.createElement(o.Z,null,"selects"===P?l.createElement(g.Z,null):l.createElement(h.Z,null)),l.createElement(n.Z,{primary:y.Z.t("core:singleClickSelects")})),l.createElement(p.Z,null),l.createElement(c.Z,{"data-tid":"gridPerspectiveSettings",title:y.Z.t("core:settings"),"aria-label":y.Z.t("core:settings"),onClick:w},l.createElement(o.Z,null,l.createElement(Z.Z,null)),l.createElement(n.Z,{primary:y.Z.t("core:settings")})),l.createElement(p.Z,null),l.createElement(c.Z,{"data-tid":"gridPerspectiveHelp",title:y.Z.t("core:help"),"aria-label":y.Z.t("core:perspectiveHelp"),onClick:x},l.createElement(o.Z,null,l.createElement(E.Z,null)),l.createElement(n.Z,{primary:y.Z.t("core:help")})))}e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const b=f,v=b;var S,C;(S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(S.register(f,"GridOptionsMenu","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/GridOptionsMenu.tsx"),S.register(b,"default","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/GridOptionsMenu.tsx")),(C="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&C(e)},26651:(e,t,r)=>{r.d(t,{Z:()=>w});var a=r(67294),l=r(24011),n=r(91647),o=r(58094),i=r(30030),c=r(18720),s=r(92384),d=r(28925),p=r(14890),m=r(3530),u=r(57866),g=r(7419),h=r(44187),Z=r(59975),E=r(1075),y=r(6121),f=r(65725),b=r(36808),v=r(64294),S=r(94968);e=r.hmd(e);var C,T=r(25108);function k(e){const{style:t,theme:r,directories:l,showDirectories:p,showDetails:h,showDescription:C,showTags:k,getCellContent:D,isAppLoading:L,currentDirectoryColor:P,currentDirectoryTags:x,currentDirectoryDescription:w,currentDirectoryPath:F,lastThumbnailImageChange:M,openRenameEntryDialog:G,lastBackgroundImageChange:H,gridPageLimit:I,currentPage:R,files:O}=e,B=O.length,z=I&&O.length>I,N=z?Math.ceil(B/I):10,U=(0,a.useRef)(null),A=(0,a.useRef)(R),W=(0,a.useRef)(!1),j=(0,a.useRef)((0,f.BK)(F,M)),J=(0,a.useRef)((0,f.jN)(F,H));let Y;if(z){const e=(A.current-1)*I;Y=O.slice(e,e+I)}else Y=O;const[,K]=(0,a.useReducer)((e=>e+1),0);(0,a.useEffect)((()=>{e.isMetaLoaded||W.current||(W.current=!0,b.Z.listMetaDirectoryPromise(e.currentDirectoryPath).then((t=>{W.current=!1,e.setIsMetaLoaded(!0);const r=X(),a=_(t),l=Q(t);return q([...r,...a,...l]),!0})).catch((e=>T.error(e))))}),[A.current,e.isMetaLoaded,O]),(0,a.useEffect)((()=>{j.current=(0,f.BK)(e.currentDirectoryPath,e.lastThumbnailImageChange),K()}),[e.currentDirectoryPath,e.lastThumbnailImageChange]),(0,a.useEffect)((()=>{J.current=(0,f.jN)(e.currentDirectoryPath,e.lastBackgroundImageChange),K()}),[e.currentDirectoryPath,e.lastBackgroundImageChange]),(0,a.useEffect)((()=>{A.current=R,U&&U.current&&(U.current.scrollTop=0)}),[e.currentLocationPath,e.currentDirectoryPath,e.lastSearchTimestamp]);const $=(e,t)=>{const r={...e};let a=(0,u.getThumbFileLocationForFile)(e.path,b.Z.getDirSeparator(),!1);return a&&t.some((e=>a.endsWith(e.path)))&&(r.thumbPath=a,(b.Z.haveObjectStoreSupport()||b.Z.haveWebDavSupport())&&(a&&a.startsWith("/")&&(a=a.substring(1)),a=b.Z.getURLforPath(a,604800),a&&(r.thumbPath=a))),r},Q=e=>Y.map((t=>Promise.resolve({[t.path]:$(t,e)}))),X=()=>l.map((async e=>{if(e.name===m.Z.metaFolder)return Promise.resolve({[e.path]:void 0});const t=await b.Z.listMetaDirectoryPromise(e.path),r=(0,u.getMetaFileLocationForDir)(e.path,b.Z.getDirSeparator()),a=(0,u.getThumbFileLocationForDirectory)(e.path,b.Z.getDirSeparator());let l;if(t.some((e=>a.endsWith(e.path)))){const t=b.Z.haveObjectStoreSupport()||b.Z.haveWebDavSupport()?b.Z.getURLforPath(a):a;l={...e,thumbPath:t}}return t.some((e=>r.endsWith(e.path)))&&-1===e.path.indexOf(m.Z.metaFolder+b.Z.getDirSeparator())?(0,f.jy)(l||e,r):Promise.resolve({[e.path]:l})})),_=e=>Y.map((t=>{const r=(0,u.getMetaFileLocationForFile)(t.path,b.Z.getDirSeparator());return e.some((e=>r.endsWith(e.path)))&&-1===t.path.indexOf(m.Z.metaFolder+b.Z.getDirSeparator())?(0,f.jy)(t,r):Promise.resolve({[t.path]:void 0})})),q=e=>{const t=e=>{};Promise.all(e.map((e=>e.catch(t)))).then((e=>(V(e),!0))).catch((e=>{T.error("err updateEntries:",e)}))},V=t=>{const r=[];t.forEach((e=>{if(e)for(const[t,a]of Object.entries(e))a&&r.push(a)})),r.length>0&&e.updateCurrentDirEntries(r)},ee=(0,u.extractDirectoryName)(e.currentDirectoryPath,b.Z.getDirSeparator()),te=P||"transparent",re=l.length+" folder(s) and "+B+" file(s) found";let ae="";w&&(ae=(0,f.Yi)(w,200));const le=C&&w;return a.createElement("div",{style:{height:"100%",background:`${te}`}},a.createElement("div",{ref:U,onContextMenu:t=>e.onContextMenu(t),onClick:t=>e.onClick(t),style:{height:"100%",overflowY:m.Z.isFirefox?"auto":"overlay",backgroundImage:'url("'+J.current+'")',backgroundSize:"cover",backgroundRepeat:"no-repeat"}},a.createElement(i.ZP,{container:!0,spacing:2},a.createElement(i.ZP,{item:!0,xs:12,style:{height:70}}),h&&a.createElement(i.ZP,{item:!0,xs:12},a.createElement("div",{style:{marginLeft:10,marginRight:10,marginTop:0,marginBottom:0,height:150,position:"relative"}},a.createElement(c.Z,{style:{display:"flex",alignItems:"center",overflow:"auto",padding:10,marginRight:160,width:"fit-content",background:r.palette.background.default,borderRadius:8,color:r.palette.text.primary}},a.createElement(o.Z,{title:g.Z.t("core:renameDirectory")},a.createElement(s.Z,{style:{fontSize:"1.5rem"},onClick:G},ee)),k?a.createElement("span",{style:{paddingLeft:5}},x&&x.map((e=>a.createElement(y.Z,{isReadOnlyMode:!0,tag:e,tagMode:"display"})))):a.createElement(E.Z,{tags:x})),a.createElement(c.Z,{style:{paddingBottom:5,background:r.palette.background.default,marginTop:-12,marginRight:160,padding:10,borderRadius:8,width:"fit-content",color:r.palette.text.primary}},(l.length>0||Y.length>0)&&a.createElement(n.Z,{style:{fontSize:"0.9rem"}},re),!C&&ae&&a.createElement(o.Z,{title:g.Z.t("core:filePropertiesDescription")},a.createElement(n.Z,{style:{fontSize:"0.8rem",wordBreak:"break-all"}},ae))),a.createElement(o.Z,{title:g.Z.t("core:thumbnail")},a.createElement("div",{style:{height:140,width:140,backgroundImage:'url("'+j.current+'")',backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"top center",position:"absolute",top:0,right:0}})))),le&&a.createElement(i.ZP,{item:!0,xs:12,style:{backgroundColor:r.palette.background.default,marginTop:h?0:10,marginLeft:25,marginRight:10,padding:2,borderRadius:5}},a.createElement(v.i,{content:w,readOnly:!0,dark:"dark"===r.palette.mode,currentFolder:F,lightMode:!0}))),a.createElement("div",{style:t,"data-tid":"perspectiveGridFileTable"},1===A.current&&l.map(((t,a)=>(0,S.cw)(t,a,D,e.classes,r,p,e.isReadOnlyMode,e.desktopMode,e.singleClickAction,e.currentLocation,e.selectedEntries,e.setSelectedEntries,e.lastSelectedEntryPath,e.directoryContent,e.openFsEntry,e.openFileNatively,e.loadDirectoryContent,e.setFileContextMenuAnchorEl,e.setDirContextMenuAnchorEl,e.showNotification,e.moveFiles,e.clearSelection))),Y.map(((t,a,l)=>(0,S.cw)(t,a,D,e.classes,r,p,e.isReadOnlyMode,e.desktopMode,e.singleClickAction,e.currentLocation,e.selectedEntries,e.setSelectedEntries,e.lastSelectedEntryPath,e.directoryContent,e.openFsEntry,e.openFileNatively,e.loadDirectoryContent,e.setFileContextMenuAnchorEl,e.setDirContextMenuAnchorEl,e.showNotification,e.moveFiles,e.clearSelection,a===l.length-1))),!L&&Y.length<1&&l.length<1&&a.createElement("div",{style:{textAlign:"center"}},!le&&a.createElement("div",{style:{position:"relative",marginBottom:150}},a.createElement(Z.Z,{isFile:!1})),a.createElement(n.Z,{style:{padding:15,color:r.palette.text.secondary}},g.Z.t("core:noFileFolderFound")),!m.Z.isCordova&&a.createElement(n.Z,{style:{color:r.palette.text.secondary}},g.Z.t("core:dragAndDropToImport"))),!L&&Y.length<1&&l.length>=1&&!p&&a.createElement("div",{style:{textAlign:"center"}},!le&&a.createElement("div",{style:{position:"relative",marginBottom:150}},a.createElement(Z.Z,{isFile:!1})),a.createElement(n.Z,{style:{padding:15,color:r.palette.text.secondary}},g.Z.t("core:noFileButFoldersFound")),!m.Z.isCordova&&a.createElement(n.Z,{style:{color:r.palette.text.secondary}},g.Z.t("core:dragAndDropToImport")))),z&&a.createElement(o.Z,{title:re},a.createElement(d.Z,{style:{left:15,bottom:65,zIndex:1100,position:"absolute",backgroundColor:r.palette.background.default,opacity:.97,border:"1px solid lightgray",borderRadius:5,padding:3},count:N,page:A.current,onChange:(t,r)=>{A.current=r,e.setIsMetaLoaded(!1),U&&U.current&&(U.current.scrollTop=0)}})),!h&&!z&&(l.length>0||Y.length>0)&&a.createElement("div",{style:{padding:15,bottom:10}},a.createElement(n.Z,{style:{fontSize:"0.9rem",color:r.palette.text.primary}},re))))}function D(e){return{isAppLoading:(0,h.hg)(e),currentDirectoryColor:(0,h.ju)(e),lastSearchTimestamp:(0,h.Yl)(e),currentDirectoryTags:(0,h.qy)(e),isMetaLoaded:(0,h.UK)(e),currentDirectoryDescription:(0,h.if)(e),lastBackgroundImageChange:(0,h.GP)(e),lastThumbnailImageChange:(0,h.lS)(e),lastSelectedEntryPath:(0,h.Fv)(e)}}function L(e){return(0,p.DE)({updateCurrentDirEntries:h.Nw.updateCurrentDirEntries,setIsMetaLoaded:h.Nw.setIsMetaLoaded},e)}(C="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&C(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(k,"useRef{containerEl}\nuseRef{page}\nuseRef{metaLoadedLock}\nuseRef{folderTmbPath}\nuseRef{folderBgndPath}\nuseReducer{[, forceUpdate](0)}\nuseEffect{}\nuseEffect{}\nuseEffect{}\nuseEffect{}");const P=(e,t)=>t.theme===e.theme&&JSON.stringify(t.lastBackgroundImageChange)===JSON.stringify(e.lastBackgroundImageChange)&&JSON.stringify(t.lastThumbnailImageChange)===JSON.stringify(e.lastThumbnailImageChange)&&t.currentDirectoryPath===e.currentDirectoryPath&&t.isMetaLoaded===e.isMetaLoaded&&t.showDirectories===e.showDirectories&&t.showDetails===e.showDetails&&t.showDescription===e.showDescription&&t.showTags===e.showTags&&t.thumbnailMode===e.thumbnailMode&&t.entrySize===e.entrySize&&t.gridPageLimit===e.gridPageLimit&&t.lastSearchTimestamp===e.lastSearchTimestamp&&t.currentDirectoryDescription===e.currentDirectoryDescription&&JSON.stringify(t.files)===JSON.stringify(e.files)&&JSON.stringify(t.directories)===JSON.stringify(e.directories)&&JSON.stringify(t.settings)===JSON.stringify(e.settings)&&JSON.stringify(t.selectedEntries)===JSON.stringify(e.selectedEntries)&&JSON.stringify(t.currentDirectoryColor)===JSON.stringify(e.currentDirectoryColor),x=(0,l.$j)(D,L)(a.memo(k,P)),w=x;var F,M;(F="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(F.register(k,"GridPagination","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/GridPagination.tsx"),F.register(D,"mapStateToProps","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/GridPagination.tsx"),F.register(L,"mapActionCreatorsToProps","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/GridPagination.tsx"),F.register(P,"areEqual","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/GridPagination.tsx"),F.register(x,"default","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/GridPagination.tsx")),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&M(e)},19412:(e,t,r)=>{r.d(t,{Z:()=>M});var a,l=r(67294),n=r(58653),o=r(77745),i=r(24498),c=r(91647),s=r(21822),d=r(52922),p=r(18037),m=r(26569),u=r(44373),g=r(74825),h=r(17888),Z=r(22949),E=r(42853),y=r(72962),f=r(29894),b=r(61702),v=r(35213),S=r(21775),C=r(8857),T=r(59462),k=r(61366),D=r(19885),L=r(7419),P=r(94315);e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);const x={root:{overflowX:"hidden"},listItem:{paddingLeft:0,paddingRight:0},pro:{backgroundColor:"#1DD19F"},colorChooserButton:{minHeight:30,border:"1px solid lightgray"}};function w(e){const[t,r]=(0,l.useReducer)((e=>e+1),0),a=(0,l.useRef)(e.thumbnailMode),k=(0,l.useRef)(e.entrySize),x=(0,l.useRef)(e.singleClickAction),{open:w,onClose:F,gridPageLimit:M,showDetails:G,toggleShowDetails:H,showDescription:I,showEntriesDescription:R,toggleShowEntriesDescription:O,toggleShowDescription:B,toggleShowDirectories:z,showDirectories:N,toggleShowTags:U,showTags:A,toggleThumbnailsMode:W,changeEntrySize:j,changeSingleClickAction:J,openHelpWebPage:Y,theme:K}=e;let $=M;return l.createElement(n.Z,{open:w,onClose:()=>F(),keepMounted:!0,scroll:"paper"},l.createElement(o.Z,null,L.Z.t("core:perspectiveSettingsTitle"),l.createElement(D.Z,{onClose:()=>F()})),l.createElement(i.Z,null,e.isLocal&&l.createElement(l.Fragment,null,l.createElement(c.Z,{style:{color:K.palette.text.primary},variant:"caption"},L.Z.t("core:folderWithCustomPerspectiveSetting")),l.createElement("br",null),l.createElement(s.Z,{"data-tid":"resetLocalSettingsTID",title:L.Z.t("core:resetLocalSettings"),onClick:()=>{e.resetLocalSettings()}},L.Z.t("core:resetLocalSettings"))),l.createElement(d.Z,null,l.createElement(p.Z,{control:l.createElement(m.Z,{"data-tid":"gridPerspectiveToggleShowDirectories",defaultChecked:N,onChange:z,name:"checkedD",color:"primary"}),label:L.Z.t("core:showHideDirectories")}),l.createElement(p.Z,{control:l.createElement(m.Z,{"data-tid":"gridPerspectiveToggleShowTags",defaultChecked:A,onChange:U,name:"checkedT",color:"primary"}),label:L.Z.t("core:showTags")}),l.createElement(p.Z,{control:l.createElement(m.Z,{"data-tid":"gridPerspectiveToggleShowEntriesDescription",defaultChecked:R,onChange:O,name:L.Z.t("core:showHideEntriesDescription"),color:"primary"}),label:L.Z.t("core:showHideEntriesDescription")}),l.createElement(u.Z,null),l.createElement(p.Z,{control:l.createElement(m.Z,{"data-tid":"gridPerspectiveToggleShowDetails",defaultChecked:G,onChange:H,name:L.Z.t("core:showHideDetails"),color:"primary"}),label:L.Z.t("core:showHideDetails")}),B&&l.createElement(p.Z,{control:l.createElement(m.Z,{"data-tid":"gridPerspectiveToggleShowDescription",defaultChecked:I,onChange:B,name:L.Z.t("core:showHideDescription"),color:"primary"}),label:L.Z.t("core:showHideDescription")})),l.createElement(u.Z,null),l.createElement(g.Z,{"data-tid":"gridPerspectiveToggleThumbnailsMode",title:L.Z.t("core:toggleThumbnailModeTitle"),"aria-label":L.Z.t("core:toggleThumbnailMode"),onClick:()=>{a.current=W(),r()}},l.createElement(f.Z,null,"cover"===a.current?l.createElement(v.Z,null):l.createElement(S.Z,null)),l.createElement(b.Z,{primary:L.Z.t("core:toggleThumbnailMode")})),l.createElement(u.Z,null),l.createElement(g.Z,{"data-tid":"sortByMenuTID",title:L.Z.t("core:sortBy"),"aria-label":L.Z.t("core:sortBy"),onClick:t=>{e.handleSortingMenu(t)}},l.createElement(b.Z,{primary:L.Z.t("core:sort")+": "+L.Z.t(e.sortBy)+" "+(e.orderBy?"ASC":"DESC")})),l.createElement(u.Z,null),l.createElement(g.Z,{"data-tid":"gridPerspectiveEntrySizeSmall",title:L.Z.t("core:entrySizeSmall"),"aria-label":L.Z.t("core:entrySizeSmall"),onClick:()=>{j("small"),k.current="small",r()}},l.createElement(f.Z,null,"small"===k.current?l.createElement(C.Z,null):l.createElement(T.Z,null)),l.createElement(b.Z,{primary:L.Z.t("core:entrySizeSmall")})),l.createElement(g.Z,{"data-tid":"gridPerspectiveEntrySizeNormal",title:L.Z.t("core:entrySizeNormal"),"aria-label":L.Z.t("core:entrySizeNormal"),onClick:()=>{j("normal"),k.current="normal",r()}},l.createElement(f.Z,null,"normal"===k.current?l.createElement(C.Z,null):l.createElement(T.Z,null)),l.createElement(b.Z,{primary:L.Z.t("core:entrySizeNormal")})),l.createElement(g.Z,{"data-tid":"gridPerspectiveEntrySizeBig",title:L.Z.t("core:entrySizeBig"),"aria-label":L.Z.t("core:entrySizeBig"),onClick:()=>{j("big"),k.current="big",r()}},l.createElement(f.Z,null,"big"===k.current?l.createElement(C.Z,null):l.createElement(T.Z,null)),l.createElement(b.Z,{primary:L.Z.t("core:entrySizeBig")})),l.createElement(u.Z,null),l.createElement(g.Z,{"data-tid":"gridPerspectiveSingleClickOpenInternally",title:L.Z.t("core:singleClickOpenInternally"),"aria-label":L.Z.t("core:singleClickOpenInternally"),onClick:()=>{J("openInternal"),x.current="openInternal",r()}},l.createElement(f.Z,null,"openInternal"===x.current?l.createElement(C.Z,null):l.createElement(T.Z,null)),l.createElement(b.Z,{primary:L.Z.t("core:singleClickOpenInternally")})),l.createElement(g.Z,{"data-tid":"gridPerspectiveSingleClickOpenExternally",title:L.Z.t("core:singleClickOpenExternally"),"aria-label":L.Z.t("core:singleClickOpenExternally"),onClick:()=>{J("openExternal"),x.current="openExternal",r()}},l.createElement(f.Z,null,"openExternal"===x.current?l.createElement(C.Z,null):l.createElement(T.Z,null)),l.createElement(b.Z,{primary:L.Z.t("core:singleClickOpenExternally")})),l.createElement(g.Z,{"data-tid":"gridPerspectiveSingleClickSelects",title:L.Z.t("core:singleClickSelects"),"aria-label":L.Z.t("core:singleClickSelects"),onClick:()=>{J("selects"),x.current="selects",r()}},l.createElement(f.Z,null,"selects"===x.current?l.createElement(C.Z,null):l.createElement(T.Z,null)),l.createElement(b.Z,{primary:L.Z.t("core:singleClickSelects")})),l.createElement(u.Z,null),l.createElement(h.Z,{fullWidth:!0,style:{overflow:"visible",marginTop:20}},l.createElement(Z.Z,{select:!0,label:L.Z.t("core:pageLimit"),name:"limit",defaultValue:M,onChange:t=>{const{target:r}=t,{value:a,name:l}=r;"limit"===l&&($=function(e){const t=parseInt(e,10);return isNaN(t)?100:t}(a)),e.setGridPageLimit($)}},l.createElement(g.Z,{value:20},"20"),l.createElement(g.Z,{value:50},"50"),l.createElement(g.Z,{value:100},"100"),l.createElement(g.Z,{value:500},"500"),l.createElement(g.Z,{value:1e3},"1000")),l.createElement(E.Z,null,L.Z.t("core:pageLimitHelp")))),l.createElement(y.Z,{style:{justifyContent:"space-between"}},l.createElement(s.Z,{"data-tid":"gridPerspectiveHelp",onClick:Y},L.Z.t("core:help")),l.createElement(s.Z,{"data-tid":"defaultSettings",onClick:()=>{F(!0)},color:"primary"},L.Z.t("core:defaultSettings")),P.T&&l.createElement(s.Z,{"data-tid":"directorySettings",onClick:()=>{F(!1)},color:"primary"},L.Z.t("core:directorySettings"))))}("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(w,"useReducer{[ignored, forceUpdate](0)}\nuseRef{thumbnailMode}\nuseRef{entrySize}\nuseRef{singleClickAction}");const F=(0,k.Z)(x,{withTheme:!0})(w),M=F;var G,H;(G="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(G.register(x,"styles","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/GridSettingsDialog.tsx"),G.register(w,"GridSettingsDialog","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/GridSettingsDialog.tsx"),G.register(F,"default","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/GridSettingsDialog.tsx")),(H="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&H(e)},36146:(e,t,r)=>{r.d(t,{Z:()=>w});var a=r(67294),l=r(54384),n=r(58094),o=r(50130),i=r(19482),c=r(50449),s=r(17171),d=r(39628),p=r(56868),m=r(41733),u=r(99138),g=r(51017),h=r(24011),Z=r(14890),E=r(3530),y=r(7419),f=r(94315),b=r(20736),v=r(74008),S=r(65725),C=r(44187);e=r.hmd(e);var T,k=r(25108);function D(e){const{classes:t,selectedEntries:r,toggleSelectAllFiles:h,someFileSelected:Z,loadParentDirectoryContent:b,layoutType:v,handleLayoutSwitch:C,isReadOnlyMode:T,openAddRemoveTagsDialog:D,openMoveCopyFilesDialog:L,openDeleteFileDialog:P,fileOperationsEnabled:x,handleSortingMenu:w,openSettings:F,keyBindings:M}=e;return a.createElement(l.Z,{className:t.topToolbar,"data-tid":"perspectiveGridToolbar"},a.createElement(n.Z,{title:y.Z.t("core:navigateToParentDirectory")+" ("+M.openParentDirectory.toUpperCase()+")"},a.createElement(o.Z,{"aria-label":y.Z.t("core:navigateToParentDirectory"),"data-tid":"gridPerspectiveOnBackButton",onClick:()=>{e.searchQuery&&Object.keys(e.searchQuery).length>0?(e.setSearchQuery({}),e.openCurrentDirectory()):b()},size:"large"},a.createElement(g.Ri,null))),a.createElement(n.Z,{title:y.Z.t("core:toggleSelectAllFiles")+" ("+M.selectAll.toUpperCase()+")"},a.createElement(o.Z,{"data-tid":"gridPerspectiveSelectAllFiles",onClick:h,size:"large"},Z?a.createElement(s.Z,null):a.createElement(d.Z,null))),a.createElement(n.Z,{title:y.Z.t("core:directoryPropertiesTitle")},a.createElement(o.Z,{"aria-label":y.Z.t("core:directoryPropertiesTitle"),"data-tid":"openFolderProperties",onClick:function(){(0,S.$W)(e.directoryPath).then((t=>(e.openFsEntry(t),!0))).catch((t=>k.warn("Error getting properties for entry: "+e.directoryPath+" - "+t)))},size:"large"},a.createElement(g.Wm,null))),!T&&a.createElement(n.Z,{title:y.Z.t("core:tagSelectedEntries")+" ("+M.addRemoveTags.toUpperCase()+")"},a.createElement("span",null,a.createElement(o.Z,{"aria-label":y.Z.t("core:tagSelectedEntries"),"data-tid":"gridPerspectiveAddRemoveTags",disabled:r.length<1,onClick:D,size:"large"},a.createElement(c.Z,null)))),!T&&a.createElement(n.Z,{title:y.Z.t("core:copyMoveSelectedEntries")},a.createElement("span",null,a.createElement(o.Z,{"aria-label":y.Z.t("core:copyMoveSelectedEntries"),"data-tid":"gridPerspectiveCopySelectedFiles",disabled:r.length<1,onClick:L,size:"large"},a.createElement(p.Z,null)))),!T&&a.createElement(n.Z,{title:y.Z.t("core:deleteSelectedEntries")+" ("+M.deleteDocument.toUpperCase()+")"},a.createElement("span",null,a.createElement(o.Z,{"aria-label":y.Z.t("core:deleteSelectedEntries"),"data-tid":"gridPerspectiveDeleteMultipleFiles",onClick:P,size:"large"},a.createElement(m.Z,null)))),a.createElement(n.Z,{title:y.Z.t("core:sort")},a.createElement(o.Z,{"aria-label":y.Z.t("core:sort"),"data-tid":"gridPerspectiveSortMenu",onClick:e=>{w(e)},size:"large"},a.createElement(i.Z,null))),f.T&&!E.Z.isCordovaAndroid&&a.createElement(n.Z,{title:y.Z.t("core:exportCsv")},a.createElement(o.Z,{"data-tid":"gridPerspectiveExportCsvMenuTID",onClick:e.handleExportCsvMenu,style:{transform:"scale(-1, 1)"},size:"large"},a.createElement(u.Z,null))),a.createElement(n.Z,{title:y.Z.t("core:perspectiveSettingsTitle")},a.createElement(o.Z,{"data-tid":"gridPerspectiveOptionsMenu",onClick:F,size:"large"},a.createElement(g.Ds,null))))}function L(e){return{searchQuery:(0,b.uP)(e),keyBindings:(0,v.PP)(e)}}function P(e){return(0,Z.DE)({setSearchQuery:b.Nw.setSearchQuery,openCurrentDirectory:C.Nw.openCurrentDirectory},e)}(T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&T(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const x=(0,h.$j)(L,P)(D),w=x;var F,M;(F="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(F.register(D,"MainToolbar","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/MainToolbar.tsx"),F.register(L,"mapStateToProps","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/MainToolbar.tsx"),F.register(P,"mapDispatchToProps","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/MainToolbar.tsx"),F.register(x,"default","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/MainToolbar.tsx")),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&M(e)},54820:(e,t,r)=>{r.d(t,{Z:()=>g});var a,l=r(67294),n=r(61702),o=r(29894),i=r(12551),c=r(74825),s=r(90813),d=r(75503),p=r(7419);function m(e){const{open:t,onClose:r,sortBy:a,orderBy:m,handleSortBy:u,anchorEl:g,searchModeEnabled:h}=e;return l.createElement(i.Z,{anchorEl:g,open:t,onClose:r},h&&l.createElement(c.Z,{"data-tid":"gridPerspectiveSortByRelevance",onClick:()=>{u("byRelevance")}},l.createElement(o.Z,{style:{minWidth:25}},"byRelevance"===a&&(m?l.createElement(d.Z,null):l.createElement(s.Z,null))),l.createElement(n.Z,{primary:p.Z.t("core:relevance")})),l.createElement(c.Z,{"data-tid":"gridPerspectiveSortByName",onClick:()=>{u("byName")}},l.createElement(o.Z,{style:{minWidth:25}},"byName"===a&&(m?l.createElement(d.Z,null):l.createElement(s.Z,null))),l.createElement(n.Z,{primary:p.Z.t("core:fileTitle")})),l.createElement(c.Z,{"data-tid":"gridPerspectiveSortBySize",onClick:()=>{u("byFileSize")}},l.createElement(o.Z,{style:{minWidth:25}},"byFileSize"===a&&(m?l.createElement(d.Z,null):l.createElement(s.Z,null))),l.createElement(n.Z,{primary:p.Z.t("core:fileSize")})),l.createElement(c.Z,{"data-tid":"gridPerspectiveSortByDate",onClick:()=>{u("byDateModified")}},l.createElement(o.Z,{style:{minWidth:25}},"byDateModified"===a&&(m?l.createElement(d.Z,null):l.createElement(s.Z,null))),l.createElement(n.Z,{primary:p.Z.t("core:fileLDTM")})),l.createElement(c.Z,{"data-tid":"gridPerspectiveSortByFirstTag",onClick:()=>{u("byFirstTag")}},l.createElement(o.Z,{style:{minWidth:25}},"byFirstTag"===a&&(m?l.createElement(d.Z,null):l.createElement(s.Z,null))),l.createElement(n.Z,{primary:p.Z.t("core:fileFirstTag")})),l.createElement(c.Z,{"data-tid":"gridPerspectiveSortByExt",onClick:()=>{u("byExtension")}},l.createElement(o.Z,{style:{minWidth:25}},"byExtension"===a&&(m?l.createElement(d.Z,null):l.createElement(s.Z,null))),l.createElement(n.Z,{primary:p.Z.t("core:fileExtension")})),l.createElement(c.Z,{"data-tid":"gridPerspectiveSortRandom",onClick:()=>{u("random")}},l.createElement(o.Z,{style:{minWidth:25}},"random"===a&&l.createElement(d.Z,null)),l.createElement(n.Z,{primary:p.Z.t("core:random")})))}e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const u=m,g=u;var h,Z;(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(h.register(m,"SortingMenu","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/SortingMenu.tsx"),h.register(u,"default","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/SortingMenu.tsx")),(Z="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&Z(e)},81034:(e,t,r)=>{r.d(t,{Z:()=>i});var a,l=r(3530),n=r(41796);e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const o=e=>({gridCell:{border:"2px solid transparent",marginTop:1,marginLeft:2,marginBottom:1,marginRight:1},rowCell:{boxShadow:"none",borderLeft:"1px solid transparent",borderRight:"1px solid transparent",borderTop:"1px solid transparent",borderBottom:"1px solid "+e.palette.divider,margin:0,marginTop:0,marginBottom:0},rowHover:{"&:hover":{backgroundColor:e.palette.divider+" !important"}},selectedGridCell:{border:"2px solid"+e.palette.primary.main,backgroundColor:e.palette.primary.light+" !important"},selectedRowCell:{border:"1px solid"+e.palette.primary.main+" !important"},gridCellThumb:{backgroundRepeat:"no-repeat",backgroundPosition:"center",borderRadius:5,marginBottom:5},gridCellTitle:{padding:"0px 5px 0 5px",minHeight:45,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",textOverflow:"ellipsis",overflow:"hidden"},gridCellTags:{padding:0,paddingTop:2,maxHeight:100,overflowY:"auto",overflowX:"hidden",position:"relative"},gridCellDescription:{padding:2,margin:2,backgroundColor:e.palette.background.paper,borderRadius:5,opacity:.6,wordBreak:"break-word",display:"block"},gridFileExtension:{paddingTop:1,paddingBottom:7,paddingLeft:3,paddingRight:3,fontSize:13,marginRight:5,marginTop:7,minWidth:35,height:16,color:"white",borderRadius:3,textAlign:"center"},gridSizeDate:{overflow:l.Z.isFirefox?"auto":"overlay",whiteSpace:"nowrap",marginRight:5,marginLeft:"auto",paddingTop:12},gridDetails:{display:"flex",whiteSpace:"nowrap"},gridFolder:{color:"white",padding:5,minHeight:15,height:20,borderRadius:3},topToolbar:{paddingLeft:5,paddingRight:5,minHeight:40,height:53,position:"absolute",zIndex:1,background:"linear-gradient(0deg, "+(0,n.Fq)(e.palette.background.default,.67)+" 0%, "+e.palette.background.default+" 99%)",backdropFilter:"blur(5px)",width:"calc(100% - 10px)",overflowX:l.Z.isFirefox?"auto":"overlay"}}),i=o;var c,s;(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&c.register(o,"default","/Users/na/TagSpaces/tsbuilder/mainrepo/app/perspectives/grid-perspective/components/styles.css.tsx"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)}}]);
//# sourceMappingURL=6746.bundle.js.map